import{al as Mt,L as C,d as Ot,F as Ht,G as Jt,am as Kt,H as b,b as n,I as Y,J as Ce,an as pe,ao as ce,a as t,w as s,K as U,v,c as T,ap as Xt,r as o,a1 as Pe,A as X,e as Wt,_ as Zt,ai as Qt,ag as Yt,aq as es,x as ts,ar as ss,a7 as ls,as,at as ns,V as os,a3 as c,o as d,T as W,u as y,ab as ee,$ as is,a6 as us,au as rs,av as ds,ah as ps,aw as cs,ax as vs,ae as fs,ay as ms,a0 as _s,az as gs,m as ve,y as Xe,aa as ys,ac as $e,aA as ks,aB as bs,aC as ws,a9 as xs,j as We,aD as Cs,aE as Ts,aF as js,X as Vs,Z as Fs,aG as Is,aH as hs,af as Es,ak as Ss,l as Ps,a5 as De,a4 as $s}from"./index-CILAngGp.js";/* empty css                             *//* empty css                   *//* empty css                    *//* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                  */import{p as G,d as te,f as fe,t as Ds,g as me}from"./index-BIy6QEMb.js";import{_ as Us}from"./_plugin-vue_export-helper-DlAUqK2U.js";const As=Mt("generate",()=>{const V=C(null),Z=C([]),_=C({projectId:"",currentStep:0,testTypes:["functional"],userRequirements:"",existingDocuments:[],existingFunctionPoints:[],generatedFunctionPoints:[],generatedTestCases:[],savedFpIds:[],uploadedDocs:[],fileList:[]}),_e=(x,E)=>{const R={id:`${x}_${Date.now()}`,type:x,status:"running",progress:0,message:"正在初始化...",projectId:E,startTime:Date.now()};return V.value=R,H(),R},g=(x,E)=>{V.value&&(V.value.progress=x,V.value.message=E,H())},O=x=>{V.value&&(V.value.status="completed",V.value.progress=100,V.value.result=x,Z.value.unshift(V.value),H())},z=x=>{V.value&&(V.value.status="failed",V.value.error=x,Z.value.unshift(V.value),H())},se=()=>V.value&&V.value.status==="running"?!1:(V.value=null,H(),!0),A=x=>{_.value={..._.value,...x},H()},w=()=>{try{const x=localStorage.getItem("generate_state");if(x){const E=JSON.parse(x);_.value={..._.value,...E.savedState},E.currentTask&&E.currentTask.status==="running"&&(V.value=E.currentTask)}}catch(x){console.error("Failed to load state:",x)}return _.value},H=()=>{try{localStorage.setItem("generate_state",JSON.stringify({currentTask:V.value,savedState:_.value,taskHistory:Z.value.slice(0,10)}))}catch(x){console.error("Failed to save state:",x)}};return{currentTask:V,taskHistory:Z,savedState:_,startTask:_e,updateTask:g,completeTask:O,failTask:z,clearTask:se,saveState:A,loadState:w,clearState:()=>{_.value={projectId:"",currentStep:0,testTypes:["functional"],userRequirements:"",existingDocuments:[],existingFunctionPoints:[],generatedFunctionPoints:[],generatedTestCases:[],savedFpIds:[],uploadedDocs:[],fileList:[]},V.value=null,localStorage.removeItem("generate_state")}}}),zs={class:"generate-page"},Rs={class:"steps-container"},qs=["onClick"],Ns={class:"step-icon"},Ls={key:1},Bs={class:"step-title"},Gs={key:0,class:"step-line"},Ms={class:"content-card"},Os={class:"step-content"},Hs={class:"step-panel"},Js={key:0,class:"project-stats"},Ks={class:"step-panel"},Xs={key:0,class:"existing-docs"},Ws={class:"step-panel"},Zs={key:0,class:"generating"},Qs={key:1},Ys={class:"fp-header"},el={class:"fp-actions"},tl={key:0,class:"empty-hint"},sl={key:1},ll={key:1},al={class:"step-panel"},nl={class:"review-header"},ol={class:"batch-actions",style:{"margin-top":"16px"}},il={class:"review-actions"},ul={class:"step-panel"},rl={key:0,class:"generating-container"},dl={class:"pulse-loader"},pl={class:"loader-icon"},cl={class:"progress-info"},vl={class:"progress-percentage"},fl={class:"progress-status"},ml={class:"progress-bar-wrapper"},_l={class:"generation-details"},gl={class:"detail-text"},yl={key:1,class:"generated-content"},kl={class:"info-alert"},bl={class:"alert-icon"},wl={class:"alert-content"},xl={class:"action-bar"},Cl={class:"action-left"},Tl={class:"list-count"},jl={class:"action-right"},Vl={key:0,class:"empty-state"},Fl={class:"empty-icon"},Il={key:1,class:"testcase-grid"},hl={class:"card-left"},El={class:"testcase-header"},Sl={class:"testcase-title-area"},Pl=["onClick"],$l={class:"testcase-meta"},Dl={key:0,class:"testcase-footer"},Ul={class:"testcase-desc"},Al={class:"card-actions"},zl=["onClick"],Rl=["onClick","disabled"],ql=["onClick","disabled"],Nl=["onClick"],Ll={key:2,class:"final-review-section"},Bl={class:"review-summary"},Gl={class:"summary-stats"},Ml={class:"stat-item"},Ol={class:"stat-icon total"},Hl={class:"stat-number"},Jl={class:"stat-item"},Kl={class:"stat-icon approved"},Xl={class:"stat-number"},Wl={class:"stat-item"},Zl={class:"stat-icon pending"},Ql={class:"stat-number"},Yl={class:"review-actions"},ea={key:0,class:"step-actions"},ta={key:0,class:"test-steps"},sa={class:"steps-list"},la={class:"step-number"},aa={class:"step-content"},na={class:"step-action"},oa={key:0,class:"step-expected"},ia={key:1,class:"no-steps"},ua={class:"dialog-footer-actions"},ra=Ot({__name:"Generate",setup(V){const Z=$s(),_=As(),_e=["选择项目","上传文档","生成功能点","审核确认","生成用例"],g=C(0),O=C(!1),z=C(!1),se=C(!1),A=C(""),w=C(0),H=C([]),D=C(null),x=C([]),E=C([]),R=C([]),le=C([]),$=C([]),F=C([]),q=C([]),p=Pe({projectId:"",testTypes:["functional"],userRequirements:""}),ae=C(!1),ne=C(""),Te=C(!1),je=C(null),Ue=C(-1),oe=C(!1),I=Pe({name:"",description:"",test_type:"functional",priority:"p2",module:"",acceptance_criteria:""}),ie=C(!1),h=Pe({title:"",description:"",test_type:"functional",priority:"p2",preconditions:"",expected_results:""}),ge=C(!1),S=C(null),L=X(()=>{const a=R.value.map(u=>({...u,isExisting:!0,isNew:!1,editing:!1})),e=$.value.map(u=>({...u,isExisting:!1,isNew:!0,status:u.status||"pending"}));return[...a,...e]}),Ve=X(()=>L.value.filter(a=>a.status==="approved").length),Fe=X(()=>L.value.filter(a=>a.status==="pending").length),Ie=X(()=>F.value.filter(a=>a.status==="approved").length),Ae=X(()=>F.value.filter(a=>!a.status||a.status==="draft").length),Ze=X(()=>{switch(g.value){case 0:return p.projectId!=="";case 1:return x.value.length>0||p.userRequirements.trim()!==""||E.value.length>0;case 2:return L.value.length>0;default:return!0}}),Qe={functional:"功能测试",performance:"性能测试",security:"安全测试",reliability:"可靠性测试"},Ye={functional:"primary",performance:"warning",security:"danger",reliability:"info"},et={p0:"danger",p1:"warning",p2:"primary",p3:"info",p4:"info"},tt={draft:"待审核",reviewed:"已审核",approved:"已通过",rejected:"已拒绝"},ye=a=>Qe[a]||a,ze=a=>Ye[a]||"info",Re=a=>et[a]||"info",qe=a=>tt[a]||"待审核",st=a=>a?new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",lt=async()=>{try{H.value=await G.list()}catch(a){console.error("Failed to load projects:",a)}},at=async a=>{if(a){E.value=[],R.value=[],$.value=[],F.value=[],q.value=[],D.value=null;try{await Q(),await ue(),await he();const e=await G.stats(a);D.value=e}catch(e){console.error("Failed to load project data:",e)}}},Q=async()=>{if(p.projectId)try{const a=await te.list({project_id:p.projectId});E.value=a||[]}catch(a){console.error("Failed to load documents:",a)}},ue=async()=>{if(p.projectId)try{const a=await fe.list({project_id:p.projectId});R.value=a||[],$.value=a||[]}catch(a){console.error("Failed to load function points:",a)}},nt=(a,e)=>{x.value=e},ot=(a,e)=>{x.value=e},it=a=>a?a<1024?a+" B":a<1024*1024?(a/1024).toFixed(1)+" KB":(a/(1024*1024)).toFixed(1)+" MB":"-",ut=a=>{c.info("文档预览功能开发中")},rt=async a=>{try{await te.parse(a.id),c.success("文档重新解析成功"),await Q()}catch(e){console.error("Failed to reparse document:",e),c.error("重新解析失败")}},dt=async a=>{try{await De.confirm(`确定要删除文档「${a.name}」吗？`,"删除确认",{type:"warning"}),await te.delete(a.id),c.success("删除成功"),await Q();const e=await G.stats(p.projectId);D.value=e}catch(e){e!=="cancel"&&console.error("Failed to delete document:",e)}},pt=()=>{g.value>0&&g.value--},ct=async()=>{g.value===1?await vt():g.value++},vt=async()=>{if(x.value.length===0){g.value++;return}O.value=!0,A.value="正在上传文档...",w.value=0;try{const a=x.value.length;for(let i=0;i<a;i++){const f=x.value[i];w.value=Math.round(i/a*50),A.value=`正在上传文档 (${i+1}/${a}): ${f.name}`;const k=await te.upload(p.projectId,f.raw);le.value.push(k),A.value=`正在解析文档: ${k.name}`,w.value=Math.round(i/a*50)+25,await te.parse(k.id),w.value=Math.round((i+1)/a*100)}const e=await te.list({project_id:p.projectId});E.value=e.filter(i=>i.status==="parsed");const u=await G.stats(p.projectId);D.value=u,c.success("文档上传并解析成功"),g.value++}catch(a){console.error("Failed to upload documents:",a),c.error("文档上传失败")}finally{O.value=!1,w.value=0}},ft=async a=>{if(!p.projectId&&a>0){c.warning("请先选择项目");return}g.value=a,a===1?await Q():a===2||a===3?await ue():a===4&&await he()},he=async()=>{if(p.projectId)try{const a=await Ds.list({project_id:p.projectId});F.value=a}catch(a){console.error("Failed to load test cases:",a)}},Ne=async()=>{if(!p.userRequirements.trim()&&E.value.length===0&&le.value.length===0){c.warning("请先上传文档或输入需求描述");return}z.value=!0,A.value="正在分析需求...",w.value=10;try{const a=[...E.value,...le.value].map(i=>i.id);A.value="正在检索文档知识库...",w.value=30,A.value="正在调用AI生成功能点...",w.value=50;const e=await me.generateFunctionPoints({project_id:p.projectId,document_ids:a,test_types:p.testTypes,user_requirements:p.userRequirements});if(w.value=90,!e.success){c.error(e.message||"功能点生成失败");return}const u=e.function_points.map(i=>({...i,project_id:p.projectId,editing:!1,status:i.status||"pending",originalData:{...i}}));$.value=[...$.value,...u],w.value=100,c.success(`成功生成 ${u.length} 个功能点`),await ue()}catch(a){console.error("Failed to generate function points:",a),c.error("功能点生成失败")}finally{z.value=!1,w.value=0}},mt=()=>{if(L.value.length===0){c.warning("请先添加功能点");return}g.value=3},_t=async()=>{var u,i;const a=$.value.filter(f=>f.status==="approved"),e=R.value.filter(f=>f.status==="approved");if(console.log("approvedNewFps:",a),console.log("approvedExistingFps:",e),a.length===0&&e.length===0){c.warning("请至少审核通过一个功能点");return}O.value=!0,A.value="正在处理功能点...",w.value=20;try{if(q.value=[],a.length>0){A.value="正在保存新功能点...",w.value=40;const k=a.map(M=>({project_id:p.projectId,name:M.name,description:M.description,test_type:M.test_type,priority:M.priority,module:M.module,acceptance_criteria:M.acceptance_criteria}));console.log("newFpsToSave:",k);const J=await me.saveFunctionPoints(k);if(console.log("saveResult:",J),!J.success){c.error(J.message||"功能点保存失败");return}q.value=J.function_points.map(M=>M.id)}const f=e.map(k=>k.id);q.value=[...q.value,...f],w.value=100,c.success(`已确认 ${q.value.length} 个功能点`),g.value=4}catch(f){console.error("Failed to confirm function points:",f);const k=((i=(u=f==null?void 0:f.response)==null?void 0:u.data)==null?void 0:i.detail)||(f==null?void 0:f.message)||"功能点确认失败";c.error(k)}finally{O.value=!1,w.value=0}},Le=async()=>{var e,u;console.log("savedFpIds:",q.value),console.log("existingFunctionPoints:",R.value);let a=[...q.value];if(a.length===0&&R.value.length>0){const i=R.value.filter(f=>f.status==="approved"||f.status==="pending");console.log("approvedFps from existing:",i),i.length>0&&(await De.confirm(`检测到该项目已有 ${i.length} 个功能点，是否使用这些功能点生成测试用例？`,"使用已有功能点",{confirmButtonText:"使用已有功能点",cancelButtonText:"取消",type:"info"}),a=i.map(f=>f.id))}if(console.log("fpIdsToUse:",a),a.length===0){c.warning("请先确认功能点或确保项目已有功能点");return}z.value=!0,A.value="正在生成测试用例...",w.value=10,_.startTask("test_cases",p.projectId),_.updateTask(10,"正在初始化...");try{w.value=30,A.value=`正在为 ${a.length} 个功能点生成测试用例...`,_.updateTask(30,`正在为 ${a.length} 个功能点生成测试用例...`),ke();const i=await me.generateTestCases({project_id:p.projectId,function_point_ids:a});if(w.value=80,_.updateTask(80,"正在处理生成结果..."),!i.success){_.failTask(i.message||"测试用例生成失败"),c.error(i.message||"测试用例生成失败");return}if(!i.test_cases||i.test_cases.length===0){_.failTask("AI未能生成测试用例"),c.warning("AI未能生成测试用例，请检查功能点内容或稍后重试");return}const f=i.test_cases.map(k=>({...k,project_id:p.projectId}));F.value=[...F.value,...f],w.value=100,_.completeTask(f),c.success(`成功生成 ${f.length} 个测试用例`)}catch(i){console.error("Failed to generate test cases:",i);const f=((u=(e=i==null?void 0:i.response)==null?void 0:e.data)==null?void 0:u.detail)||(i==null?void 0:i.message)||"测试用例生成失败";_.failTask(f),c.error(f)}finally{z.value=!1,w.value=0,ke()}},gt=async()=>{const a=F.value.filter(e=>e.status==="approved");if(a.length===0){c.warning("请先审核通过测试用例");return}se.value=!0;try{const e=await me.saveTestCases(a);if(!e.success){c.error(e.message||"测试用例保存失败");return}c.success(`成功保存 ${a.length} 个测试用例`);const u=await G.stats(p.projectId);D.value=u,F.value=F.value.filter(i=>i.status!=="approved"),De.confirm("测试用例已保存成功，是否前往用例管理页面查看？","提示",{confirmButtonText:"前往查看",cancelButtonText:"继续生成",type:"success"}).then(()=>{Z.push("/test-cases")}).catch(()=>{He()})}catch(e){console.error("Failed to save test cases:",e),c.error("测试用例保存失败")}finally{se.value=!1}},yt=a=>{a.status="approved",c.success("测试用例审核通过")},kt=a=>{a.status="rejected",c.success("测试用例已拒绝")},bt=()=>{for(const a of F.value)(!a.status||a.status==="draft")&&(a.status="approved");c.success("已全部审核通过")},wt=a=>{a.editing=!0,a.originalData={...a}},Be=async a=>{try{await fe.approve(a.id),a.status="approved",c.success("功能点审核通过");const e=await G.stats(p.projectId);D.value=e}catch(e){console.error("Failed to approve:",e),c.error("审核失败")}},Ge=async a=>{try{await fe.reject(a.id),a.status="rejected",c.success("功能点已拒绝");const e=await G.stats(p.projectId);D.value=e}catch(e){console.error("Failed to reject:",e),c.error("操作失败")}},Me=async(a,e)=>{if(a.isExisting)e==="approved"?await Be(a):await Ge(a);else{const u=$.value.findIndex(i=>i.name===a.name&&i.test_type===a.test_type);u!==-1&&($.value[u].status=e,a.status=e,c.success(e==="approved"?"功能点审核通过":"功能点已拒绝"))}},xt=async()=>{for(const e of L.value)if(e.status==="pending")if(e.isExisting)try{await fe.approve(e.id),e.status="approved"}catch(u){console.error("Failed to approve:",u)}else{const u=$.value.findIndex(i=>i.name===e.name&&i.test_type===e.test_type);u!==-1&&($.value[u].status="approved")}const a=await G.stats(p.projectId);D.value=a,c.success("已全部审核通过")},Ct=async()=>{for(const e of L.value)if(e.status==="pending")if(e.isExisting)try{await fe.reject(e.id),e.status="rejected"}catch(u){console.error("Failed to reject:",u)}else{const u=$.value.findIndex(i=>i.name===e.name&&i.test_type===e.test_type);u!==-1&&($.value[u].status="rejected")}const a=await G.stats(p.projectId);D.value=a,c.success("已全部拒绝")},Tt=a=>{a.editing=!1,delete a.originalData},jt=a=>{Object.assign(a,a.originalData),a.editing=!1},Vt=a=>{$.value.splice(a,1)},Ft=a=>{je.value=a,Ue.value=$.value.indexOf(a),ne.value="",ae.value=!0},It=async()=>{if(!ne.value.trim()){c.warning("请输入优化建议");return}Te.value=!0;try{const a=await me.refineFunctionPoint({function_point:je.value,user_feedback:ne.value,project_id:p.projectId});if(!a.success){c.error(a.message||"优化失败");return}Object.assign($.value[Ue.value],a.function_point),ae.value=!1,c.success("功能点优化成功")}catch(a){console.error("Failed to refine:",a),c.error("优化失败")}finally{Te.value=!1}},ht=()=>{I.name="",I.description="",I.test_type="functional",I.priority="p2",I.module="",I.acceptance_criteria="",oe.value=!0},Et=()=>{if(!I.name.trim()){c.warning("请输入功能点名称");return}$.value.push({...I,project_id:p.projectId,editing:!1}),oe.value=!1,c.success("功能点添加成功")},St=()=>{h.title="",h.description="",h.test_type="functional",h.priority="p2",h.preconditions="",h.expected_results="",ie.value=!0},Pt=()=>{if(!h.title.trim()){c.warning("请输入测试用例标题");return}F.value.push({...h,project_id:p.projectId,test_steps:[],test_category:"functional"}),ie.value=!1,c.success("测试用例添加成功")},Oe=a=>{S.value=a,ge.value=!0},$t=()=>{S.value&&(S.value.status="approved",c.success("测试用例审核通过"))},Dt=()=>{S.value&&(S.value.status="rejected",c.success("测试用例已拒绝"))},Ut=X(()=>z.value?`正在为 ${q.value.length||R.value.length} 个功能点生成测试用例...`:""),At=a=>{F.value.splice(a,1)},He=()=>{g.value=0,p.projectId="",p.testTypes=["functional"],p.userRequirements="",x.value=[],E.value=[],R.value=[],le.value=[],$.value=[],F.value=[],q.value=[],D.value=null,_.clearState()},ke=()=>{_.saveState({projectId:p.projectId,currentStep:g.value,testTypes:p.testTypes,userRequirements:p.userRequirements,existingDocuments:E.value,existingFunctionPoints:R.value,generatedFunctionPoints:$.value,generatedTestCases:F.value,savedFpIds:q.value,uploadedDocs:le.value,fileList:x.value})},zt=async()=>{const a=_.loadState();if(a.projectId&&(p.projectId=a.projectId,p.testTypes=a.testTypes||["functional"],p.userRequirements=a.userRequirements||"",g.value=a.currentStep||0,a.projectId))try{D.value=await G.stats(a.projectId),await Q(),await ue(),await he()}catch(e){console.error("Failed to restore state:",e)}_.currentTask&&_.currentTask.status==="running"&&(z.value=!0,A.value=_.currentTask.message,w.value=_.currentTask.progress,_.currentTask.type==="test_cases"&&Rt())},Rt=()=>{const a=()=>{if(!_.currentTask||_.currentTask.status!=="running"){z.value=!1;return}A.value=_.currentTask.message,w.value=_.currentTask.progress,_.currentTask.status==="running"?setTimeout(a,1e3):_.currentTask.status==="completed"?(z.value=!1,_.currentTask.result&&(F.value=_.currentTask.result,c.success("测试用例生成完成"))):_.currentTask.status==="failed"&&(z.value=!1,c.error(_.currentTask.error||"生成失败"))};a()};return Ht(async()=>{await lt();const a=new URLSearchParams(window.location.search),e=a.get("project_id");if(a.get("reset")==="true"||e){if(He(),e){p.projectId=e,g.value=1;try{D.value=await G.stats(e),await Q(),await ue()}catch(i){console.error("Failed to load project data:",i)}}}else zt()}),Jt(()=>{ke()}),Kt([g,p,$,F,q],()=>{ke()},{deep:!0}),(a,e)=>{var Ke;const u=Wt,i=ys,f=us,k=is,J=ds,M=rs,re=Zt,Ee=Qt,be=cs,we=ps,qt=Yt,Je=es,P=vs,B=fs,m=ts,Se=ss,Nt=ls,N=_s,Lt=as,Bt=ns,xe=os,K=Ss,Gt=Es;return d(),b("div",zs,[e[99]||(e[99]=n("div",{class:"page-header"},[n("div",{class:"header-content"},[n("h1",{class:"page-title"},"AI生成测试用例"),n("p",{class:"page-subtitle"},"智能化测试用例生成流程")])],-1)),n("div",Rs,[(d(),b(Y,null,Ce(_e,(l,r)=>n("div",{key:r,class:W(["step-item",{"is-active":g.value===r,"is-finished":g.value>r,"is-clickable":p.projectId||r===0}]),onClick:j=>ft(r)},[n("div",Ns,[g.value>r?(d(),T(u,{key:0},{default:s(()=>[t(y(ee))]),_:1})):(d(),b("span",Ls,v(r+1),1))]),n("div",Bs,v(l),1),r<_e.length-1?(d(),b("div",Gs)):U("",!0)],10,qs)),64))]),n("div",Ms,[n("div",Os,[pe(n("div",Hs,[t(re,{model:p,"label-width":"100px"},{default:s(()=>[t(k,{label:"选择项目"},{default:s(()=>[t(f,{modelValue:p.projectId,"onUpdate:modelValue":e[0]||(e[0]=l=>p.projectId=l),placeholder:"请选择项目",style:{width:"100%"},onChange:at},{default:s(()=>[(d(!0),b(Y,null,Ce(H.value,l=>(d(),T(i,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(k,{label:"测试类型"},{default:s(()=>[t(M,{modelValue:p.testTypes,"onUpdate:modelValue":e[1]||(e[1]=l=>p.testTypes=l)},{default:s(()=>[t(J,{label:"functional"},{default:s(()=>[...e[25]||(e[25]=[o("功能测试",-1)])]),_:1}),t(J,{label:"performance"},{default:s(()=>[...e[26]||(e[26]=[o("性能测试",-1)])]),_:1}),t(J,{label:"security"},{default:s(()=>[...e[27]||(e[27]=[o("安全测试",-1)])]),_:1}),t(J,{label:"reliability"},{default:s(()=>[...e[28]||(e[28]=[o("可靠性测试",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),D.value&&p.projectId?(d(),b("div",Js,[t(Ee,null,{default:s(()=>[...e[29]||(e[29]=[o("项目统计信息",-1)])]),_:1}),t(qt,{gutter:20},{default:s(()=>[t(we,{span:6},{default:s(()=>[t(be,{title:"已上传文档",value:D.value.document_count},{suffix:s(()=>[...e[30]||(e[30]=[n("span",{style:{"font-size":"14px"}},"个",-1)])]),_:1},8,["value"])]),_:1}),t(we,{span:6},{default:s(()=>[t(be,{title:"已解析文档",value:D.value.parsed_document_count},{suffix:s(()=>[...e[31]||(e[31]=[n("span",{style:{"font-size":"14px"}},"个",-1)])]),_:1},8,["value"])]),_:1}),t(we,{span:6},{default:s(()=>[t(be,{title:"测试功能点",value:D.value.function_point_count},{suffix:s(()=>[...e[32]||(e[32]=[n("span",{style:{"font-size":"14px"}},"个",-1)])]),_:1},8,["value"])]),_:1}),t(we,{span:6},{default:s(()=>[t(be,{title:"测试用例",value:D.value.test_case_count},{suffix:s(()=>[...e[33]||(e[33]=[n("span",{style:{"font-size":"14px"}},"个",-1)])]),_:1},8,["value"])]),_:1})]),_:1})])):U("",!0)],512),[[ce,g.value===0]]),pe(n("div",Ks,[E.value.length>0?(d(),b("div",Xs,[t(Je,{type:"success",closable:!1,"show-icon":"",style:{"margin-bottom":"16px"}},{title:s(()=>[n("span",null,[e[34]||(e[34]=o("该项目已有 ",-1)),n("strong",null,v(E.value.length),1),e[35]||(e[35]=o(" 个文档",-1))])]),_:1}),t(Se,{data:E.value,stripe:"",size:"small",style:{"margin-bottom":"20px"}},{default:s(()=>[t(P,{prop:"name",label:"文档名称","min-width":"200","show-overflow-tooltip":""}),t(P,{prop:"doc_type",label:"类型",width:"100"},{default:s(({row:l})=>[t(B,{size:"small"},{default:s(()=>[o(v(l.doc_type||"文档"),1)]),_:2},1024)]),_:1}),t(P,{prop:"status",label:"状态",width:"100"},{default:s(({row:l})=>[t(B,{type:l.status==="parsed"?"success":l.status==="pending"?"warning":"info",size:"small"},{default:s(()=>[o(v(l.status==="parsed"?"已解析":l.status==="pending"?"待解析":"解析失败"),1)]),_:2},1032,["type"])]),_:1}),t(P,{prop:"file_size",label:"大小",width:"100"},{default:s(({row:l})=>[o(v(it(l.file_size)),1)]),_:1}),t(P,{prop:"created_at",label:"上传时间",width:"160"},{default:s(({row:l})=>[o(v(st(l.created_at)),1)]),_:1}),t(P,{label:"操作",width:"150",fixed:"right"},{default:s(({row:l})=>[t(m,{type:"primary",link:"",size:"small",onClick:r=>ut(l)},{default:s(()=>[...e[36]||(e[36]=[o("查看",-1)])]),_:1},8,["onClick"]),t(m,{type:"warning",link:"",size:"small",onClick:r=>rt(l),disabled:l.status==="parsed"},{default:s(()=>[...e[37]||(e[37]=[o("重解析",-1)])]),_:1},8,["onClick","disabled"]),t(m,{type:"danger",link:"",size:"small",onClick:r=>dt(l)},{default:s(()=>[...e[38]||(e[38]=[o("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),t(Ee,null,{default:s(()=>[...e[39]||(e[39]=[o("继续上传新文档",-1)])]),_:1})])):U("",!0),t(Nt,{class:"upload-area",drag:"",multiple:"","file-list":x.value,"auto-upload":!1,"on-change":nt,"on-remove":ot},{tip:s(()=>[...e[40]||(e[40]=[n("div",{class:"el-upload__tip"}," 支持 PDF、Word、Markdown、TXT 等格式文档 ",-1)])]),default:s(()=>[t(u,{class:"el-icon--upload"},{default:s(()=>[t(y(ms))]),_:1}),e[41]||(e[41]=n("div",{class:"el-upload__text"},[o(" 拖拽文件到此处或 "),n("em",null,"点击上传")],-1))]),_:1},8,["file-list"]),t(Ee,null,{default:s(()=>[...e[42]||(e[42]=[o("或者",-1)])]),_:1}),t(re,{"label-width":"100px"},{default:s(()=>[t(k,{label:"需求描述"},{default:s(()=>[t(N,{modelValue:p.userRequirements,"onUpdate:modelValue":e[2]||(e[2]=l=>p.userRequirements=l),type:"textarea",rows:5,placeholder:`请输入您的测试需求描述，例如：
- 测试用户登录功能
- 测试API接口响应时间
- 测试数据安全性`},null,8,["modelValue"])]),_:1})]),_:1})],512),[[ce,g.value===1]]),pe(n("div",Ws,[O.value?(d(),b("div",Zs,[t(u,{class:"is-loading",size:40},{default:s(()=>[t(y(gs))]),_:1}),n("p",null,v(A.value),1),t(Lt,{percentage:w.value,"stroke-width":8,style:{width:"300px","margin-top":"20px"}},null,8,["percentage"])])):(d(),b("div",Qs,[n("div",Ys,[n("span",null,"功能点列表 ("+v(L.value.length)+" 个)",1),n("div",el,[t(m,{type:"primary",onClick:Ne,loading:z.value},{default:s(()=>[t(u,null,{default:s(()=>[t(y(ve))]),_:1}),e[43]||(e[43]=o(" AI辅助生成 ",-1))]),_:1},8,["loading"]),t(m,{onClick:ht},{default:s(()=>[t(u,null,{default:s(()=>[t(y(Xe))]),_:1}),e[44]||(e[44]=o(" 添加功能点 ",-1))]),_:1})])]),L.value.length===0?(d(),b("div",tl,[t(Bt,{description:"暂无功能点，请点击「AI辅助生成」或「添加功能点」"},{default:s(()=>[t(m,{type:"primary",onClick:Ne,loading:z.value},{default:s(()=>[t(u,null,{default:s(()=>[t(y(ve))]),_:1}),e[45]||(e[45]=o(" AI辅助生成 ",-1))]),_:1},8,["loading"])]),_:1})])):(d(),T(Se,{key:1,data:L.value,stripe:"","max-height":"450"},{default:s(()=>[t(P,{prop:"name",label:"功能点名称","min-width":"200"},{default:s(({row:l})=>[l.editing?(d(),T(N,{key:0,modelValue:l.name,"onUpdate:modelValue":r=>l.name=r,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(d(),b("span",sl,[o(v(l.name)+" ",1),l.isExisting?(d(),T(B,{key:0,type:"info",size:"small",style:{"margin-left":"4px"}},{default:s(()=>[...e[46]||(e[46]=[o("已有",-1)])]),_:1})):l.isNew?(d(),T(B,{key:1,type:"success",size:"small",style:{"margin-left":"4px"}},{default:s(()=>[...e[47]||(e[47]=[o("新增",-1)])]),_:1})):U("",!0)]))]),_:1}),t(P,{prop:"test_type",label:"测试类型",width:"120"},{default:s(({row:l})=>[l.editing?(d(),T(f,{key:0,modelValue:l.test_type,"onUpdate:modelValue":r=>l.test_type=r,size:"small"},{default:s(()=>[t(i,{label:"功能测试",value:"functional"}),t(i,{label:"性能测试",value:"performance"}),t(i,{label:"安全测试",value:"security"}),t(i,{label:"可靠性测试",value:"reliability"})]),_:1},8,["modelValue","onUpdate:modelValue"])):(d(),T(B,{key:1,type:ze(l.test_type)},{default:s(()=>[o(v(ye(l.test_type)),1)]),_:2},1032,["type"]))]),_:1}),t(P,{prop:"priority",label:"优先级",width:"100"},{default:s(({row:l})=>[l.editing?(d(),T(f,{key:0,modelValue:l.priority,"onUpdate:modelValue":r=>l.priority=r,size:"small"},{default:s(()=>[t(i,{label:"P0",value:"p0"}),t(i,{label:"P1",value:"p1"}),t(i,{label:"P2",value:"p2"}),t(i,{label:"P3",value:"p3"}),t(i,{label:"P4",value:"p4"})]),_:1},8,["modelValue","onUpdate:modelValue"])):(d(),T(B,{key:1,type:Re(l.priority)},{default:s(()=>{var r;return[o(v((r=l.priority)==null?void 0:r.toUpperCase()),1)]}),_:2},1032,["type"]))]),_:1}),t(P,{prop:"status",label:"状态",width:"90"},{default:s(({row:l})=>[t(B,{type:l.status==="approved"?"success":l.status==="rejected"?"danger":"warning",size:"small"},{default:s(()=>[o(v(l.status==="approved"?"已审核":l.status==="rejected"?"已拒绝":"待审核"),1)]),_:2},1032,["type"])]),_:1}),t(P,{prop:"module",label:"模块",width:"100"},{default:s(({row:l})=>[l.editing?(d(),T(N,{key:0,modelValue:l.module,"onUpdate:modelValue":r=>l.module=r,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(d(),b("span",ll,v(l.module||"-"),1))]),_:1}),t(P,{label:"操作",width:"220",fixed:"right"},{default:s(({row:l,$index:r})=>[l.editing?(d(),b(Y,{key:0},[t(m,{type:"success",link:"",onClick:j=>Tt(l)},{default:s(()=>[...e[48]||(e[48]=[o("保存",-1)])]),_:1},8,["onClick"]),t(m,{link:"",onClick:j=>jt(l)},{default:s(()=>[...e[49]||(e[49]=[o("取消",-1)])]),_:1},8,["onClick"])],64)):(d(),b(Y,{key:1},[l.isExisting&&l.status!=="approved"?(d(),T(m,{key:0,type:"success",link:"",onClick:j=>Be(l)},{default:s(()=>[...e[50]||(e[50]=[o("审核",-1)])]),_:1},8,["onClick"])):U("",!0),l.isExisting&&l.status!=="rejected"?(d(),T(m,{key:1,type:"warning",link:"",onClick:j=>Ge(l)},{default:s(()=>[...e[51]||(e[51]=[o("拒绝",-1)])]),_:1},8,["onClick"])):U("",!0),l.isExisting?U("",!0):(d(),T(m,{key:2,type:"primary",link:"",onClick:j=>wt(l)},{default:s(()=>[...e[52]||(e[52]=[o("编辑",-1)])]),_:1},8,["onClick"])),l.isExisting?U("",!0):(d(),T(m,{key:3,type:"warning",link:"",onClick:j=>Ft(l)},{default:s(()=>[...e[53]||(e[53]=[o("AI优化",-1)])]),_:1},8,["onClick"])),l.isExisting?U("",!0):(d(),T(m,{key:4,type:"danger",link:"",onClick:j=>Vt(r)},{default:s(()=>[...e[54]||(e[54]=[o("删除",-1)])]),_:1},8,["onClick"]))],64))]),_:1})]),_:1},8,["data"]))]))],512),[[ce,g.value===2]]),pe(n("div",al,[n("div",nl,[t(Je,{type:"info",closable:!1,"show-icon":""},{title:s(()=>[n("span",null,[e[55]||(e[55]=o("请审核以下 ",-1)),n("strong",null,v(L.value.length),1),e[56]||(e[56]=o(" 个功能点，已审核通过 ",-1)),n("strong",null,v(Ve.value),1),e[57]||(e[57]=o(" 个，确认后继续生成测试用例",-1))])]),_:1})]),n("div",ol,[t(m,{type:"success",onClick:xt,disabled:Fe.value===0},{default:s(()=>[t(u,null,{default:s(()=>[t(y(ee))]),_:1}),o(" 全部通过 ("+v(Fe.value)+" 个待审核) ",1)]),_:1},8,["disabled"]),t(m,{type:"danger",onClick:Ct,disabled:Fe.value===0},{default:s(()=>[t(u,null,{default:s(()=>[t(y($e))]),_:1}),e[58]||(e[58]=o(" 全部拒绝 ",-1))]),_:1},8,["disabled"])]),t(Se,{data:L.value,stripe:"","max-height":"350",style:{"margin-top":"16px"}},{default:s(()=>[t(P,{type:"index",label:"#",width:"50"}),t(P,{prop:"name",label:"功能点名称","min-width":"180"},{default:s(({row:l})=>[o(v(l.name)+" ",1),l.isExisting?(d(),T(B,{key:0,type:"info",size:"small",style:{"margin-left":"4px"}},{default:s(()=>[...e[59]||(e[59]=[o("已有",-1)])]),_:1})):l.isNew?(d(),T(B,{key:1,type:"success",size:"small",style:{"margin-left":"4px"}},{default:s(()=>[...e[60]||(e[60]=[o("新增",-1)])]),_:1})):U("",!0)]),_:1}),t(P,{prop:"test_type",label:"测试类型",width:"100"},{default:s(({row:l})=>[t(B,{type:ze(l.test_type)},{default:s(()=>[o(v(ye(l.test_type)),1)]),_:2},1032,["type"])]),_:1}),t(P,{prop:"priority",label:"优先级",width:"80"},{default:s(({row:l})=>[t(B,{type:Re(l.priority)},{default:s(()=>{var r;return[o(v((r=l.priority)==null?void 0:r.toUpperCase()),1)]}),_:2},1032,["type"])]),_:1}),t(P,{prop:"status",label:"状态",width:"100"},{default:s(({row:l})=>[t(B,{type:l.status==="approved"?"success":l.status==="rejected"?"danger":"warning"},{default:s(()=>[o(v(l.status==="approved"?"已审核":l.status==="rejected"?"已拒绝":"待审核"),1)]),_:2},1032,["type"])]),_:1}),t(P,{prop:"module",label:"模块",width:"100"}),t(P,{prop:"description",label:"描述","min-width":"150","show-overflow-tooltip":""}),t(P,{label:"操作",width:"150",fixed:"right"},{default:s(({row:l})=>[t(m,{type:"success",link:"",onClick:r=>Me(l,"approved"),disabled:l.status==="approved"},{default:s(()=>[...e[61]||(e[61]=[o(" 通过 ",-1)])]),_:1},8,["onClick","disabled"]),t(m,{type:"danger",link:"",onClick:r=>Me(l,"rejected"),disabled:l.status==="rejected"},{default:s(()=>[...e[62]||(e[62]=[o(" 拒绝 ",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1},8,["data"]),n("div",il,[t(m,{onClick:e[3]||(e[3]=l=>g.value=2)},{default:s(()=>[t(u,null,{default:s(()=>[t(y(ks))]),_:1}),e[63]||(e[63]=o(" 返回修改 ",-1))]),_:1}),t(m,{type:"primary",onClick:_t,disabled:Ve.value===0},{default:s(()=>[o(" 确认并生成测试用例 ("+v(Ve.value)+" 个) ",1),t(u,null,{default:s(()=>[t(y(bs))]),_:1})]),_:1},8,["disabled"])])],512),[[ce,g.value===3]]),pe(n("div",ul,[O.value?(d(),b("div",rl,[n("div",dl,[e[64]||(e[64]=n("div",{class:"pulse-circle"},null,-1)),e[65]||(e[65]=n("div",{class:"pulse-circle"},null,-1)),e[66]||(e[66]=n("div",{class:"pulse-circle"},null,-1)),n("div",pl,[t(u,null,{default:s(()=>[t(y(ve))]),_:1})])]),n("div",cl,[n("div",vl,v(w.value)+"%",1),n("div",fl,v(A.value),1),n("div",ml,[n("div",{class:"progress-bar-fill",style:Xt({width:w.value+"%"})},null,4)])]),n("div",_l,[n("span",gl,v(Ut.value),1)])])):(d(),b("div",yl,[n("div",kl,[n("div",bl,[t(u,null,{default:s(()=>[t(y(ws))]),_:1})]),n("div",wl,[e[67]||(e[67]=o(" 已确认 ",-1)),n("strong",null,v(q.value.length||R.value.length),1),e[68]||(e[68]=o(" 个功能点，可用于生成测试用例 ",-1))])]),n("div",xl,[n("div",Cl,[e[69]||(e[69]=n("span",{class:"list-title"},"测试用例列表",-1)),n("span",Tl,v(F.value.length)+" 个",1)]),n("div",jl,[t(m,{type:"primary",class:"ai-btn",onClick:Le,loading:z.value},{default:s(()=>[t(u,null,{default:s(()=>[t(y(ve))]),_:1}),e[70]||(e[70]=o(" AI智能生成 ",-1))]),_:1},8,["loading"]),t(m,{onClick:St},{default:s(()=>[t(u,null,{default:s(()=>[t(y(Xe))]),_:1}),e[71]||(e[71]=o(" 手动添加 ",-1))]),_:1})])]),F.value.length===0?(d(),b("div",Vl,[n("div",Fl,[t(u,null,{default:s(()=>[t(y(xs))]),_:1})]),e[73]||(e[73]=n("p",{class:"empty-title"},"暂无测试用例",-1)),e[74]||(e[74]=n("p",{class:"empty-desc"},"点击下方按钮，AI将根据功能点自动生成测试用例",-1)),t(m,{type:"primary",size:"large",class:"empty-btn",onClick:Le,loading:z.value},{default:s(()=>[t(u,null,{default:s(()=>[t(y(ve))]),_:1}),e[72]||(e[72]=o(" AI智能生成 ",-1))]),_:1},8,["loading"])])):(d(),b("div",Il,[(d(!0),b(Y,null,Ce(F.value,(l,r)=>{var j;return d(),b("div",{key:r,class:W(["testcase-card",[`priority-${l.priority}`,l.status||"draft"]])},[n("div",hl,[n("div",El,[n("div",{class:W(["testcase-icon",l.test_type])},[l.test_type==="functional"?(d(),T(u,{key:0},{default:s(()=>[t(y(We))]),_:1})):l.test_type==="performance"?(d(),T(u,{key:1},{default:s(()=>[t(y(Cs))]),_:1})):l.test_type==="security"?(d(),T(u,{key:2},{default:s(()=>[t(y(Ts))]),_:1})):(d(),T(u,{key:3},{default:s(()=>[t(y(js))]),_:1}))],2),n("div",Sl,[n("div",{class:"testcase-title",onClick:de=>Oe(l)},v(l.title),9,Pl),n("div",$l,[n("span",{class:W(["meta-tag",`type-${l.test_type}`])},v(ye(l.test_type)),3),n("span",{class:W(["meta-tag",`priority-${l.priority}`])},v((j=l.priority)==null?void 0:j.toUpperCase()),3)])]),n("div",{class:W(["testcase-status-badge",l.status||"draft"])},[e[75]||(e[75]=n("span",{class:"status-dot"},null,-1)),o(" "+v(qe(l.status)),1)],2)]),l.description?(d(),b("div",Dl,[n("div",Ul,v(l.description),1)])):U("",!0)]),n("div",Al,[n("button",{class:"action-btn view",onClick:de=>Oe(l),title:"查看详情"},[t(u,null,{default:s(()=>[t(y(Vs))]),_:1})],8,zl),n("button",{class:"action-btn approve",onClick:de=>yt(l),disabled:l.status==="approved",title:"通过"},[t(u,null,{default:s(()=>[t(y(ee))]),_:1})],8,Rl),n("button",{class:"action-btn reject",onClick:de=>kt(l),disabled:l.status==="approved"||l.status==="rejected",title:"拒绝"},[t(u,null,{default:s(()=>[t(y($e))]),_:1})],8,ql),n("button",{class:"action-btn delete",onClick:de=>At(r),title:"删除"},[t(u,null,{default:s(()=>[t(y(Fs))]),_:1})],8,Nl)])],2)}),128))])),F.value.length>0?(d(),b("div",Ll,[n("div",Bl,[e[82]||(e[82]=n("div",{class:"summary-title"},"审核统计",-1)),n("div",Gl,[n("div",Ml,[n("span",Ol,[t(u,null,{default:s(()=>[t(y(We))]),_:1})]),n("span",null,[e[76]||(e[76]=o("总计 ",-1)),n("span",Hl,v(F.value.length),1),e[77]||(e[77]=o(" 个",-1))])]),n("div",Jl,[n("span",Kl,[t(u,null,{default:s(()=>[t(y(ee))]),_:1})]),n("span",null,[e[78]||(e[78]=o("已通过 ",-1)),n("span",Xl,v(Ie.value),1),e[79]||(e[79]=o(" 个",-1))])]),n("div",Wl,[n("span",Zl,[t(u,null,{default:s(()=>[t(y(Is))]),_:1})]),n("span",null,[e[80]||(e[80]=o("待审核 ",-1)),n("span",Ql,v(Ae.value),1),e[81]||(e[81]=o(" 个",-1))])])])]),n("div",Yl,[t(m,{type:"success",size:"large",onClick:bt,disabled:Ae.value===0},{default:s(()=>[t(u,null,{default:s(()=>[t(y(ee))]),_:1}),e[83]||(e[83]=o(" 全部通过 ",-1))]),_:1},8,["disabled"]),t(m,{type:"primary",size:"large",onClick:gt,loading:se.value,disabled:Ie.value===0},{default:s(()=>[t(u,null,{default:s(()=>[t(y(hs))]),_:1}),o(" 保存已通过 ("+v(Ie.value)+") ",1)]),_:1},8,["loading","disabled"])])])):U("",!0)]))],512),[[ce,g.value===4]])]),g.value<4||g.value===4&&!O.value?(d(),b("div",ea,[g.value>0&&g.value!==3?(d(),T(m,{key:0,onClick:pt},{default:s(()=>[...e[84]||(e[84]=[o("上一步",-1)])]),_:1})):U("",!0),g.value<2?(d(),T(m,{key:1,type:"primary",onClick:ct,disabled:!Ze.value},{default:s(()=>[...e[85]||(e[85]=[o(" 下一步 ",-1)])]),_:1},8,["disabled"])):U("",!0),g.value===2&&L.value.length>0?(d(),T(m,{key:2,type:"primary",onClick:mt},{default:s(()=>[...e[86]||(e[86]=[o(" 下一步：审核确认 ",-1)])]),_:1})):U("",!0)])):U("",!0)]),t(xe,{modelValue:ae.value,"onUpdate:modelValue":e[6]||(e[6]=l=>ae.value=l),title:"AI优化功能点",width:"500px"},{footer:s(()=>[t(m,{onClick:e[5]||(e[5]=l=>ae.value=!1)},{default:s(()=>[...e[87]||(e[87]=[o("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:It,loading:Te.value},{default:s(()=>[...e[88]||(e[88]=[o("优化",-1)])]),_:1},8,["loading"])]),default:s(()=>[t(re,{"label-width":"80px"},{default:s(()=>[t(k,{label:"功能点"},{default:s(()=>{var l;return[t(N,{"model-value":(l=je.value)==null?void 0:l.name,disabled:""},null,8,["model-value"])]}),_:1}),t(k,{label:"优化建议"},{default:s(()=>[t(N,{modelValue:ne.value,"onUpdate:modelValue":e[4]||(e[4]=l=>ne.value=l),type:"textarea",rows:4,placeholder:`请输入您的优化建议，例如：
- 增加异常场景测试
- 调整优先级为P0
- 补充验收标准`},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(xe,{modelValue:oe.value,"onUpdate:modelValue":e[14]||(e[14]=l=>oe.value=l),title:"添加功能点",width:"500px"},{footer:s(()=>[t(m,{onClick:e[13]||(e[13]=l=>oe.value=!1)},{default:s(()=>[...e[89]||(e[89]=[o("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:Et},{default:s(()=>[...e[90]||(e[90]=[o("添加",-1)])]),_:1})]),default:s(()=>[t(re,{model:I,"label-width":"80px"},{default:s(()=>[t(k,{label:"名称",required:""},{default:s(()=>[t(N,{modelValue:I.name,"onUpdate:modelValue":e[7]||(e[7]=l=>I.name=l),placeholder:"请输入功能点名称"},null,8,["modelValue"])]),_:1}),t(k,{label:"描述"},{default:s(()=>[t(N,{modelValue:I.description,"onUpdate:modelValue":e[8]||(e[8]=l=>I.description=l),type:"textarea",rows:2,placeholder:"请输入功能点描述"},null,8,["modelValue"])]),_:1}),t(k,{label:"测试类型"},{default:s(()=>[t(f,{modelValue:I.test_type,"onUpdate:modelValue":e[9]||(e[9]=l=>I.test_type=l),style:{width:"100%"}},{default:s(()=>[t(i,{label:"功能测试",value:"functional"}),t(i,{label:"性能测试",value:"performance"}),t(i,{label:"安全测试",value:"security"}),t(i,{label:"可靠性测试",value:"reliability"})]),_:1},8,["modelValue"])]),_:1}),t(k,{label:"优先级"},{default:s(()=>[t(f,{modelValue:I.priority,"onUpdate:modelValue":e[10]||(e[10]=l=>I.priority=l),style:{width:"100%"}},{default:s(()=>[t(i,{label:"P0 - 核心",value:"p0"}),t(i,{label:"P1 - 重要",value:"p1"}),t(i,{label:"P2 - 一般",value:"p2"}),t(i,{label:"P3 - 次要",value:"p3"}),t(i,{label:"P4 - 边缘",value:"p4"})]),_:1},8,["modelValue"])]),_:1}),t(k,{label:"模块"},{default:s(()=>[t(N,{modelValue:I.module,"onUpdate:modelValue":e[11]||(e[11]=l=>I.module=l),placeholder:"请输入所属模块"},null,8,["modelValue"])]),_:1}),t(k,{label:"验收标准"},{default:s(()=>[t(N,{modelValue:I.acceptance_criteria,"onUpdate:modelValue":e[12]||(e[12]=l=>I.acceptance_criteria=l),type:"textarea",rows:2,placeholder:"请输入验收标准"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(xe,{modelValue:ie.value,"onUpdate:modelValue":e[22]||(e[22]=l=>ie.value=l),title:"添加测试用例",width:"600px"},{footer:s(()=>[t(m,{onClick:e[21]||(e[21]=l=>ie.value=!1)},{default:s(()=>[...e[91]||(e[91]=[o("取消",-1)])]),_:1}),t(m,{type:"primary",onClick:Pt},{default:s(()=>[...e[92]||(e[92]=[o("添加",-1)])]),_:1})]),default:s(()=>[t(re,{model:h,"label-width":"80px"},{default:s(()=>[t(k,{label:"标题",required:""},{default:s(()=>[t(N,{modelValue:h.title,"onUpdate:modelValue":e[15]||(e[15]=l=>h.title=l),placeholder:"请输入测试用例标题"},null,8,["modelValue"])]),_:1}),t(k,{label:"描述"},{default:s(()=>[t(N,{modelValue:h.description,"onUpdate:modelValue":e[16]||(e[16]=l=>h.description=l),type:"textarea",rows:2,placeholder:"请输入测试用例描述"},null,8,["modelValue"])]),_:1}),t(k,{label:"测试类型"},{default:s(()=>[t(f,{modelValue:h.test_type,"onUpdate:modelValue":e[17]||(e[17]=l=>h.test_type=l),style:{width:"100%"}},{default:s(()=>[t(i,{label:"功能测试",value:"functional"}),t(i,{label:"性能测试",value:"performance"}),t(i,{label:"安全测试",value:"security"}),t(i,{label:"可靠性测试",value:"reliability"})]),_:1},8,["modelValue"])]),_:1}),t(k,{label:"优先级"},{default:s(()=>[t(f,{modelValue:h.priority,"onUpdate:modelValue":e[18]||(e[18]=l=>h.priority=l),style:{width:"100%"}},{default:s(()=>[t(i,{label:"P0",value:"p0"}),t(i,{label:"P1",value:"p1"}),t(i,{label:"P2",value:"p2"}),t(i,{label:"P3",value:"p3"})]),_:1},8,["modelValue"])]),_:1}),t(k,{label:"前置条件"},{default:s(()=>[t(N,{modelValue:h.preconditions,"onUpdate:modelValue":e[19]||(e[19]=l=>h.preconditions=l),type:"textarea",rows:2,placeholder:"请输入前置条件"},null,8,["modelValue"])]),_:1}),t(k,{label:"预期结果"},{default:s(()=>[t(N,{modelValue:h.expected_results,"onUpdate:modelValue":e[20]||(e[20]=l=>h.expected_results=l),type:"textarea",rows:2,placeholder:"请输入预期结果"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(xe,{modelValue:ge.value,"onUpdate:modelValue":e[24]||(e[24]=l=>ge.value=l),title:(Ke=S.value)==null?void 0:Ke.title,width:"720px",class:"tc-detail-dialog"},{footer:s(()=>{var l,r,j;return[n("div",ua,[t(m,{onClick:e[23]||(e[23]=de=>ge.value=!1)},{default:s(()=>[...e[96]||(e[96]=[o("关闭",-1)])]),_:1}),t(m,{type:"success",onClick:$t,disabled:((l=S.value)==null?void 0:l.status)==="approved"},{default:s(()=>[t(u,null,{default:s(()=>[t(y(ee))]),_:1}),e[97]||(e[97]=o(" 通过审核 ",-1))]),_:1},8,["disabled"]),t(m,{type:"danger",onClick:Dt,disabled:((r=S.value)==null?void 0:r.status)==="approved"||((j=S.value)==null?void 0:j.status)==="rejected"},{default:s(()=>[t(u,null,{default:s(()=>[t(y($e))]),_:1}),e[98]||(e[98]=o(" 拒绝 ",-1))]),_:1},8,["disabled"])])]}),default:s(()=>{var l;return[t(Gt,{column:2,border:""},{default:s(()=>[t(K,{label:"测试类型"},{default:s(()=>{var r;return[o(v(ye((r=S.value)==null?void 0:r.test_type)),1)]}),_:1}),t(K,{label:"优先级"},{default:s(()=>{var r,j;return[o(v((j=(r=S.value)==null?void 0:r.priority)==null?void 0:j.toUpperCase()),1)]}),_:1}),t(K,{label:"测试分类"},{default:s(()=>{var r;return[o(v(((r=S.value)==null?void 0:r.test_category)||"-"),1)]}),_:1}),t(K,{label:"状态"},{default:s(()=>{var r,j;return[n("span",{class:W(["status-text",((r=S.value)==null?void 0:r.status)||"draft"])},v(qe((j=S.value)==null?void 0:j.status)),3)]}),_:1}),t(K,{label:"前置条件",span:2},{default:s(()=>{var r;return[o(v(((r=S.value)==null?void 0:r.preconditions)||"-"),1)]}),_:1}),t(K,{label:"描述",span:2},{default:s(()=>{var r;return[o(v(((r=S.value)==null?void 0:r.description)||"-"),1)]}),_:1}),t(K,{label:"预期结果",span:2},{default:s(()=>{var r;return[o(v(((r=S.value)==null?void 0:r.expected_results)||"-"),1)]}),_:1})]),_:1}),Array.isArray((l=S.value)==null?void 0:l.test_steps)&&S.value.test_steps.length>0?(d(),b("div",ta,[e[94]||(e[94]=n("h4",null,"测试步骤",-1)),n("div",sa,[(d(!0),b(Y,null,Ce(S.value.test_steps,(r,j)=>(d(),b("div",{key:j,class:"step-item"},[n("div",la,v(r.step_num||j+1),1),n("div",aa,[n("div",na,v(r.action),1),r.expected_result?(d(),b("div",oa,[e[93]||(e[93]=n("span",{class:"expected-label"},"预期:",-1)),o(" "+v(r.expected_result),1)])):U("",!0)])]))),128))])])):(d(),b("div",ia,[t(u,null,{default:s(()=>[t(y(Ps))]),_:1}),e[95]||(e[95]=n("span",null,"暂无测试步骤",-1))]))]}),_:1},8,["modelValue","title"])])}}}),ba=Us(ra,[["__scopeId","data-v-b755231d"]]);export{ba as default};
